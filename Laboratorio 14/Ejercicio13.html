<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Herencia: Figuras Geométricas</title>
</head>
<body>
  <h2>Cálculo de área y perímetro (Herencia)</h2>

  <label for="tipoFigura">Selecciona la figura:</label>
  <select id="tipoFigura" onchange="actualizarFormulario()">
    <option value="cuadrado">Cuadrado</option>
    <option value="triangulo">Triángulo</option>
  </select>

  <div id="formCuadrado">
    <h3>Datos del cuadrado</h3>
    <label for="ladoCuadrado">Lado:</label>
    <input type="number" id="ladoCuadrado" step="any" placeholder="Ej: 5">
  </div>

  <div id="formTriangulo" style="display:none;">
    <h3>Datos del triángulo</h3>
    <label for="baseTriangulo">Base:</label>
    <input type="number" id="baseTriangulo" step="any" placeholder="Ej: 4">

    <label for="alturaTriangulo">Altura:</label>
    <input type="number" id="alturaTriangulo" step="any" placeholder="Ej: 3">

    <br><br>

    <label for="lado1Triangulo">Lado 1:</label>
    <input type="number" id="lado1Triangulo" step="any" placeholder="Ej: 3">

    <label for="lado2Triangulo">Lado 2:</label>
    <input type="number" id="lado2Triangulo" step="any" placeholder="Ej: 4">

    <label for="lado3Triangulo">Lado 3:</label>
    <input type="number" id="lado3Triangulo" step="any" placeholder="Ej: 5">
  </div>

  <br>
  <button onclick="calcular()">Calcular área y perímetro</button>

  <h3>Resultados</h3>
  <p><strong>Figura:</strong> <span id="resFigura">-</span></p>
  <p><strong>Área:</strong> <span id="resArea">-</span></p>
  <p><strong>Perímetro:</strong> <span id="resPerimetro">-</span></p>

  <p id="mensaje" style="color:red;"></p>

  <script>
    // ================= CLASES (POO / HERENCIA) =================
    class Figura {
      constructor(nombre) {
        this.nombre = nombre;
      }

      area() {
        throw new Error('El método area() debe ser sobrescrito por la subclase');
      }

      perimetro() {
        throw new Error('El método perimetro() debe ser sobrescrito por la subclase');
      }
    }

    class Cuadrado extends Figura {
      constructor(lado) {
        super('Cuadrado');
        this.lado = lado;
      }

      area() {
        return this.lado * this.lado;
      }

      perimetro() {
        return 4 * this.lado;
      }
    }

    class Triangulo extends Figura {
      constructor(base, altura, lado1, lado2, lado3) {
        super('Triángulo');
        this.base = base;
        this.altura = altura;
        this.lado1 = lado1;
        this.lado2 = lado2;
        this.lado3 = lado3;
      }

      area() {
        return (this.base * this.altura) / 2;
      }

      perimetro() {
        return this.lado1 + this.lado2 + this.lado3;
      }
    }

    // ================= LÓGICA DE INTERFAZ =================
    function actualizarFormulario() {
      const tipo = document.getElementById('tipoFigura').value;
      const formCuadrado = document.getElementById('formCuadrado');
      const formTriangulo = document.getElementById('formTriangulo');

      if (tipo === 'cuadrado') {
        formCuadrado.style.display = 'block';
        formTriangulo.style.display = 'none';
      } else {
        formCuadrado.style.display = 'none';
        formTriangulo.style.display = 'block';
      }

      document.getElementById('mensaje').textContent = '';
      document.getElementById('resFigura').textContent = '-';
      document.getElementById('resArea').textContent = '-';
      document.getElementById('resPerimetro').textContent = '-';
    }

    function calcular() {
      const tipo = document.getElementById('tipoFigura').value;
      const msg = document.getElementById('mensaje');
      msg.textContent = '';

      let figura;

      if (tipo === 'cuadrado') {
        const lado = parseFloat(document.getElementById('ladoCuadrado').value);

        if (isNaN(lado) || lado <= 0) {
          msg.textContent = 'Ingresa un lado válido para el cuadrado.';
          return;
        }

        figura = new Cuadrado(lado);

      } else if (tipo === 'triangulo') {
        const base = parseFloat(document.getElementById('baseTriangulo').value);
        const altura = parseFloat(document.getElementById('alturaTriangulo').value);
        const lado1 = parseFloat(document.getElementById('lado1Triangulo').value);
        const lado2 = parseFloat(document.getElementById('lado2Triangulo').value);
        const lado3 = parseFloat(document.getElementById('lado3Triangulo').value);

        if ([base, altura, lado1, lado2, lado3].some(v => isNaN(v) || v <= 0)) {
          msg.textContent = 'Ingresa base, altura y los 3 lados con valores > 0.';
          return;
        }

        figura = new Triangulo(base, altura, lado1, lado2, lado3);
      }

      // Cálculo genérico vía polimorfismo
      const area = figura.area();
      const perimetro = figura.perimetro();

      document.getElementById('resFigura').textContent = figura.nombre;
      document.getElementById('resArea').textContent = area.toFixed(2);
      document.getElementById('resPerimetro').textContent = perimetro.toFixed(2);
    }
  </script>
</body>
</html>
